
# Домашнее задание к занятию "1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

## Задача 1
**Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.**

Предложенные виды виртуализации отличаются по способам взаимодействия с ресурсами и операционной системы хостовой машины:

**Полная виртуализация** подразумевает полный доступ к аппаратным ресурсам гипервизора и ВМ без прослойки в виде ОС хоста, код выполняется с помощью инструкций виртуализации ЦПУ. ВМ изолированы друг от друга, могут использоваться разные ОС и ядра. ВМ используют реальные аппаратные ресурсы хоста.

**Паравиртуализация** использует подход, когда гипервизор и ВМ устанавливается в ОС хоста и доступ к ресурсам приходится разделять с ОС. Набор устройств и ресурсов для ВМ определяется через гипервизор.

**Виртуализация на основе ОС** позволяет запускать изолированные ВМ (контейнеры) с помощью ОС хоста (выступает в роли гипервизора), все контейнеры должны иметь то же ядро что и ОС хоста. Контейнеры выступают как отдельные процессы в основной ОС.

**В чём разница при работе с ядром гостевой ОС для полной и паравиртуализации?**

При паравиртуализации гипервизор модифицирует ядро гостевой ОС для улучшения производительности и разделения доступа к аппаратным ресурсам физического сервера.
При полной виртуализации не требуются устанавливать хостовую ОС, все задачи выполняет гипервизор. Гостевая ОС не требует никаких изменений и не подозревает что запущена в ВМ.

## Задача 2
**Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.**

Организация серверов:

- физические сервера,

- паравиртуализация,

- виртуализация уровня ОС.

Условия использования:

- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.


**Системы, выполняющие высокопроизводительные расчеты на GPU**

 Необходимо использование физического сервера, так как необходима высокая производительность и полный доступ к ресурсам без прослойки в виде ВМ.

**Высоконагруженная база данных, чувствительная к отказу**

Ввиду высокой нагрузки скорее всего стоит отдать предпочтение физическому серверу, и продумать систему резервного копирования.

**Windows системы для использования бухгалтерским отдел**

Стоит использовать паравиртуализацию, потому что нет критичных требований к ресурсам, проще управление через гипервизор с возможностью гибкой настройки и переносом данных в случае отказа.

**Различные web-приложения**

Использование виртуализации уровня ОС, так как нет жестких требований к аппаратным ресурсам и контейнерами можно легко управлять и масштабировать
в рамках одной ОС.



## Задача 3
**Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.**

**Сценарии:**
- **100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.**

Аппаратная виртуализация на уровне VMware ESXi или vSphere, потому что нет требований с бюджету, наиболее популярное и универсальное решение для подобных задач, с гибкой возможностью управления.

- **Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.**

Аппаратная виртуализация на XEN
Бесплатна, распространяется по GPL лицензии, обладает надежностью и стабильностью подойдет для большинства задач.

- **Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.**

Аппаратная виртуализация Hyper-V
Майкрософтовский гипервизор максимально приспособлен для работы с Windows.


- **Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.**

Контейнеризация отпадает ввиду необходимости разных ОС, по этому использовать паравиртуализацию на VirtualBox или KVM наиболее дружелюбную к Linux.


## Задача 4

**Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет?**

**Мотивируйте ваш ответ примерами.**

Основные проблемы и недостатки гетерогенной среды:

- **Финансовые:** стоимость оборудования, внедрения и поддержки разных систем виртуализации, затраты на найм или обучения специалистов по конкретным продуктам для виртуализации.

- **Аппаратные:** множественный “зоопарк” виртуальных серверов с разными гипервизорами и ОС, ведет к усложнению настройки, мониторинга и управления всей инфраструктуры..

В качестве минимизации рисков вижу остановится на использовании одной системы виртуализации(или хотя бы от одного вендора типа VMware), и не плодить сущности. 

Все зависит от доступных ресурсов и поставленных задач. В идеальных условиях лучше остановиться на одном конкретном решении, но это не всегда удается.
Например в контексте обучения DevOps уже приходится использовать гетерогенную среду, используя YandexCloud и создания там виртуалок, на которых потом будет крутиться контейнеры Docker.
